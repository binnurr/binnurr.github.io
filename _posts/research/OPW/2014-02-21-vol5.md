---
title: "Gazebo Diary – Vol. 5 (SDF Validator-2)"
date: "2014-02-21"
categories: 
  - "sdf-editor-for-gazebo-opw-project"
---

Upon obtaining the [XSD files](http://sdformat.org/schemas/) generated for the SDF (Simulator Description Format) files of Gazebo, I have validated the text in the editor again the XSD files. If the text does not meet the format described by the XSD files, then the editor highlights the line that causes the error in red and shows an error message in the box located just below the editor.

![gazebo1](/images/gazebo1-1024x723.png)

 

 
```python
#! /usr/bin/python
import urllib2

def download\_file(file\_url, file\_name):

print "download " + file\_name + " from " + file\_url
response = urllib2.urlopen(file\_url)
content = response.read()
schema\_file = open(file\_name, 'w')
schema\_file.write(content)
schema\_file.close()

file\_list = open('file\_list.txt')
for line in file\_list:

file\_name = line.strip('\\n')
file\_url = "http://sdformat.org/schemas/" + file\_name
download\_file(file\_url, file\_name)
```
By this script, we can download all XSD files from the link. The file\_list.txt includes the names of all XSD files.

 

 

#!/usr/bin/python
from xml.dom.minidom import parse

def get\_file\_ref(file\_url):

index = file\_url.rfind('/')
file\_name = file\_url\[index+1:\]
return './' + file\_name

def replace\_includes(xml\_file):

dom = parse(xml\_file)
include\_nodes = dom.getElementsByTagName('xsd:include')
for node in include\_nodes:

node.attributes\['schemaLocation'\].nodeValue = get\_file\_ref(node.attributes\['schemaLocation'\].nodeValue) 
print node.attributes\['schemaLocation'\].nodeValue

file\_handle = open(xml\_file, 'w')
dom.writexml(file\_handle)
file\_handle.close()

file\_list = open('file\_list.txt')
for line in file\_list:

file\_name = line.strip('\\n')
replace\_includes(file\_name)

By this script, we can replace includes with local files. For example, the line <xsd:include schemaLocation="http://sdformat.org/schemas/types.xsd"/> is replaced by the location of the types.xsd file which is downloaded before by utilizing the above script.
